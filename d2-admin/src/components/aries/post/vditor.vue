<template>
  <div class="contentEditor-box">
    <div id="contentEditor"></div>
  </div>
</template>

<script>
import Vditor from 'vditor'
import 'vditor/src/assets/scss/index.scss'

export default {
  name: 'editEditor',
  data () {
    return {
      contentEditor: null
    }
  },
  props: {
    content: {
      type: String,
      default: ''
    }
  },
  mounted () {
    this.initEditor()
  },
  watch: {
    // ç›‘å¬ç¼–è¾‘å™¨å†…å®¹å˜åŒ–
    content (newValue) {
      this.setContent(newValue)
    }
  },
  methods: {
    // åˆå§‹åŒ–vditor
    initEditor () {
      this.contentEditor = new Vditor('contentEditor', {
        height: 380,
        toolbarConfig: {
          pin: true
        },
        cache: {
          enable: false
        },
        hint: {
          emoji: {
            pray: 'ğŸ™',
            broken_heart: 'ğŸ’”',
            ok_hand: 'ğŸ‘Œ',
            smile: 'ğŸ˜„',
            laughing: 'ğŸ˜†',
            smirk: 'ğŸ˜',
            heart_eyes: 'ğŸ˜',
            grin: 'ğŸ˜',
            stuck_out_tongue: 'ğŸ˜›',
            expressionless: 'ğŸ˜‘',
            unamused: 'ğŸ˜’',
            sob: 'ğŸ˜­',
            joy: 'ğŸ˜‚',
            tired_face: 'ğŸ˜«',
            blush: 'ğŸ˜Š',
            cry: 'ğŸ˜¢',
            fearful: 'ğŸ˜¨'
          }
        },
        counter: 100000,
        after: () => {
          this.setContent(this.content)
        }
      })
    },
    /*    initEditor () {
              this.contentEditor = new Vditor('contentEditor', {
                typewriterMode: true,
                tab: '\t',
                cache: true,
                preview: {
                  delay: 500,
                  // mode: 'both',
                  parse: element => {
                    if (element.style.display === 'none') {
                      return
                    }
                    // LazyLoadImage()
                    Vditor.highlightRender(
                      {
                        style: 'github',
                        enable: true
                      },
                      document
                    )
                  }
                },

                placeholder: ''
              })
            }, */
    // è·å–ç¼–è¾‘å™¨æ–‡æœ¬
    getContent () {
      return this.contentEditor.getValue()
    },
    // è·å– HTML
    getHTML () {
      return this.contentEditor.getHTML()
    },
    // è®¾ç½®ç¼–è¾‘å™¨æ–‡æœ¬
    setContent (val) {
      this.contentEditor.setValue(val)
    }
  }
}
</script>

<style scoped>
</style>
